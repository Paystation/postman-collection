{
	"info": {
		"_postman_id": "a85b0290-4d42-479d-9e2a-4a26abc6b17b",
		"name": "Paystation",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Purchase",
			"item": [
				{
					"name": "2 party",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_2p=t\r\n&pstn_am=100\r\n&pstn_cn={{CardNumber}}\r\n&pstn_ex={{Expiry}}\r\n&pstn_cc={{CSC}}"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				},
				{
					"name": "2 party with HMAC",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"/*\r",
									"-----------------------------------------------------------------\r",
									"1) Add the following code to 'Pre-request Script' tab\r",
									"2) Make sure you have an Environment enabled for your request\r",
									"3) Append to url: {{hmacQueryString}}\r",
									"4) Add new environment variable `HmacKey` with your key\r",
									"-----------------------------------------------------------------\r",
									"*/\r",
									"function buildPostBody(body) {\r",
									"    const uuid = require('uuid');\r",
									"    body = JSON.parse('{\"' + decodeURI(body).replace(/\\s/g, '').replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}');\r",
									"    body.pstn_ms = 'MS-HMAC-' + uuid.v4();\r",
									"    pm.variables.set('MerchantSession', body.pstn_ms);\r",
									"    body.pstn_pi = pm.variables.get(\"PaystationAccount\");\r",
									"    body.pstn_gi = pm.variables.get(\"PaystationGateway\");\r",
									"    body.pstn_cn = pm.variables.get(\"CardNumber\");\r",
									"    body.pstn_ex = pm.variables.get(\"Expiry\");\r",
									"    body.pstn_cc = pm.variables.get(\"CSC\");\r",
									"    return Object.keys(body).map(function(k) { return encodeURIComponent(k) + '=' + encodeURIComponent(body[k])}).join('&');\r",
									"}\r",
									"\r",
									"function getAuthHeader(httpMethod, requestUrl, requestBody) {\r",
									"    const moment = require('moment');\r",
									"\r",
									"    const AUTH_TYPE = 'HMAC-SHA512';\r",
									"    const HMAC_KEY = postman.getEnvironmentVariable('HmacKey');\r",
									"\r",
									"    requestBody = buildPostBody(requestBody);\r",
									"    var timestamp = moment(new Date().toISOString()).valueOf();\r",
									"    var dataToHash = timestamp + 'paystation' + requestBody;\r",
									"    var hmacDigest = CryptoJS.enc.Hex.stringify(CryptoJS.HmacSHA512(dataToHash, HMAC_KEY));\r",
									"    return 'pstn_HMACTimestamp=' + timestamp + '&pstn_HMAC=' + hmacDigest;\r",
									"}\r",
									"\r",
									"postman.setEnvironmentVariable('hmacQueryString', getAuthHeader(request['method'], request['url'], request['data']));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty&pstn_nr=t&pstn_pi={{PaystationAccount}}&pstn_gi={{PaystationGateway}}&pstn_ms={{MerchantSession}}&pstn_2p=t&pstn_am=100&pstn_cn={{CardNumber}}&pstn_ex={{Expiry}}&pstn_cc={{CSC}}"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll?{{hmacQueryString}}",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							],
							"query": [
								{
									"key": "{{hmacQueryString}}",
									"value": null
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "3 party",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_am=5000"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				},
				{
					"name": "3 party with HMAC",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"/*\r",
									"-----------------------------------------------------------------\r",
									"1) Add the following code to 'Pre-request Script' tab\r",
									"2) Make sure you have an Environment enabled for your request\r",
									"3) Append to url: {{hmacQueryString}}\r",
									"4) Add new environment variable `HmacKey` with your key\r",
									"-----------------------------------------------------------------\r",
									"*/\r",
									"function buildPostBody(body) {\r",
									"    const uuid = require('uuid');\r",
									"    body = JSON.parse('{\"' + decodeURI(body).replace(/\\s/g, '').replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}');\r",
									"    body.pstn_ms = 'MS-HMAC-' + uuid.v4();\r",
									"    pm.variables.set('MerchantSession', body.pstn_ms);\r",
									"    body.pstn_pi = pm.variables.get(\"PaystationAccount\");\r",
									"    body.pstn_gi = pm.variables.get(\"PaystationGateway\");\r",
									"    return Object.keys(body).map(function(k) { return encodeURIComponent(k) + '=' + encodeURIComponent(body[k])}).join('&');\r",
									"}\r",
									"\r",
									"function getAuthHeader(httpMethod, requestUrl, requestBody) {\r",
									"    const moment = require('moment');\r",
									"\r",
									"    const AUTH_TYPE = 'HMAC-SHA512';\r",
									"    const HMAC_KEY = postman.getEnvironmentVariable('HmacKey');\r",
									"\r",
									"    requestBody = buildPostBody(requestBody);\r",
									"    var timestamp = moment(new Date().toISOString()).valueOf();\r",
									"    var dataToHash = timestamp + 'paystation' + requestBody;\r",
									"    var hmacDigest = CryptoJS.enc.Hex.stringify(CryptoJS.HmacSHA512(dataToHash, HMAC_KEY));\r",
									"    return 'pstn_HMACTimestamp=' + timestamp + '&pstn_HMAC=' + hmacDigest;\r",
									"}\r",
									"\r",
									"postman.setEnvironmentVariable('hmacQueryString', getAuthHeader(request['method'], request['url'], request['data']));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty&pstn_nr=t&pstn_pi={{PaystationAccount}}&pstn_gi={{PaystationGateway}}&pstn_ms={{MerchantSession}}&pstn_am=5000"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll?{{hmacQueryString}}",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							],
							"query": [
								{
									"key": "{{hmacQueryString}}",
									"value": null
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "3 party with HMAC [dynamic url]",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"/*\r",
									"-----------------------------------------------------------------\r",
									"1) Add the following code to 'Pre-request Script' tab\r",
									"2) Make sure you have an Environment enabled for your request\r",
									"3) Append to url: {{hmacQueryString}}\r",
									"4) Add new environment variable `HmacKey` with your key\r",
									"-----------------------------------------------------------------\r",
									"*/\r",
									"function buildPostBody(body) {\r",
									"    const uuid = require('uuid');\r",
									"    body = JSON.parse('{\"' + decodeURI(body).replace(/\\s/g, '').replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}');\r",
									"    console.log('body:'+ body);\r",
									"    body.pstn_ms = 'MS-HMAC-' + uuid.v4();\r",
									"    pm.variables.set('MerchantSession', body.pstn_ms);\r",
									"    body.pstn_pi = pm.variables.get(\"PaystationAccount\");\r",
									"    body.pstn_gi = pm.variables.get(\"PaystationGateway\");\r",
									"    body.pstn_du = pm.variables.get(\"DynamicUrl\");\r",
									"    return Object.keys(body).map(function(k) { return encodeURIComponent(k) + '=' + body[k]}).join('&');\r",
									"}\r",
									"\r",
									"function getAuthHeader(httpMethod, requestUrl, requestBody) {\r",
									"    const moment = require('moment');\r",
									"\r",
									"    const AUTH_TYPE = 'HMAC-SHA512';\r",
									"    const HMAC_KEY = postman.getEnvironmentVariable('HmacKey');\r",
									"    console.log(requestBody);\r",
									"    requestBody = buildPostBody(requestBody);\r",
									"    console.log(requestBody);\r",
									"    var timestamp = moment(new Date().toISOString()).valueOf();\r",
									"    var dataToHash = timestamp + 'paystation' + requestBody;\r",
									"    var hmacDigest = CryptoJS.enc.Hex.stringify(CryptoJS.HmacSHA512(dataToHash, HMAC_KEY));\r",
									"    return 'pstn_HMACTimestamp=' + timestamp + '&pstn_HMAC=' + hmacDigest;\r",
									"}\r",
									"\r",
									"postman.setEnvironmentVariable('hmacQueryString', getAuthHeader(request['method'], request['url'], request['data']));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty&pstn_nr=t&pstn_pi={{PaystationAccount}}&pstn_gi={{PaystationGateway}}&pstn_ms={{MerchantSession}}&pstn_am=5000&pstn_du={{DynamicUrl}}"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll?{{hmacQueryString}}",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							],
							"query": [
								{
									"key": "{{hmacQueryString}}",
									"value": null
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Authorisation",
			"item": [
				{
					"name": "2 party",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('response is ok', function() {",
									"    pm.response.to.have.status(200);",
									"    var response = xml2Json(responseBody);",
									"    pm.expect(response).to.have.property('PaystationFuturePaymentResponse');",
									"    pm.expect(response.PaystationFuturePaymentResponse).to.have.property('FuturePaymentToken');",
									"});",
									"",
									"pm.test('response has token', function() {",
									"    var response = xml2Json(responseBody);",
									"    pm.expect(response).to.have.property('PaystationFuturePaymentResponse');",
									"    pm.expect(response.PaystationFuturePaymentResponse).to.have.property('FuturePaymentToken'); ",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_2p=t\r\n&pstn_am=100\r\n&pstn_cn={{CardNumber}}\r\n&pstn_ex={{Expiry}}\r\n&pstn_cc={{CSC}}\r\n&pstn_pa=t"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				},
				{
					"name": "3 party",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_am=100\r\n&pstn_pa=t"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Capture",
			"item": [
				{
					"name": "2 party",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_am=100\r\n&pstn_2p=t\r\n&pstn_cp=t\r\n&pstn_cx=0000000000-01"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Refund",
			"item": [
				{
					"name": "Refund transaction",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_am=100\r\n&pstn_2p=t\r\n&pstn_rc=t\r\n&pstn_rt=0000000000-01"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Reversal",
			"item": [
				{
					"name": "Reversal transaction",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_2p=t\r\n&pstn_rv=t\r\n&pstn_rt=0000000000-01"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Tokens",
			"item": [
				{
					"name": "Save",
					"item": [
						{
							"name": "2 party",
							"item": [
								{
									"name": "Token save",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_2p=t\r\n&pstn_fp=t\r\n&pstn_fs=t\r\n&pstn_cn={{CardNumber}}\r\n&pstn_ex={{Expiry}}"
										},
										"url": {
											"raw": "https://www.paystation.co.nz/direct/paystation.dll",
											"protocol": "https",
											"host": [
												"www",
												"paystation",
												"co",
												"nz"
											],
											"path": [
												"direct",
												"paystation.dll"
											]
										}
									},
									"response": []
								},
								{
									"name": "Token save with custom token",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"pm.test('response is ok', function() {",
													"    pm.response.to.have.status(200);",
													"    var response = xml2Json(responseBody);",
													"    pm.expect(response).to.have.property('PaystationFuturePaymentResponse');",
													"    pm.expect(response.PaystationFuturePaymentResponse).to.have.property('FuturePaymentToken');",
													"});",
													"",
													"pm.test('response has token', function() {",
													"    var response = xml2Json(responseBody);",
													"    pm.expect(response).to.have.property('PaystationFuturePaymentResponse');",
													"    pm.expect(response.PaystationFuturePaymentResponse).to.have.property('FuturePaymentToken'); ",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_2p=t\r\n&pstn_fp=t\r\n&pstn_fs=t\r\n&pstn_cn={{CardNumber}}\r\n&pstn_ex={{Expiry}}\r\n&pstn_ft=test-token-creation-{{$timestamp}}"
										},
										"url": {
											"raw": "https://www.paystation.co.nz/direct/paystation.dll",
											"protocol": "https",
											"host": [
												"www",
												"paystation",
												"co",
												"nz"
											],
											"path": [
												"direct",
												"paystation.dll"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "3 party",
							"item": [
								{
									"name": "Token save",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_fp=t\r\n&pstn_fs=t"
										},
										"url": {
											"raw": "https://www.paystation.co.nz/direct/paystation.dll",
											"protocol": "https",
											"host": [
												"www",
												"paystation",
												"co",
												"nz"
											],
											"path": [
												"direct",
												"paystation.dll"
											]
										}
									},
									"response": []
								},
								{
									"name": "Token save with custom token",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_fp=t\r\n&pstn_fs=t\r\n&pstn_ft=test-token-creation-{{$timestamp}}"
										},
										"url": {
											"raw": "https://www.paystation.co.nz/direct/paystation.dll",
											"protocol": "https",
											"host": [
												"www",
												"paystation",
												"co",
												"nz"
											],
											"path": [
												"direct",
												"paystation.dll"
											]
										}
									},
									"response": []
								}
							]
						}
					]
				},
				{
					"name": "Initiator",
					"item": [
						{
							"name": "2 party",
							"item": [
								{
									"name": "token initiator",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_am=100\r\n&pstn_2p=t\r\n&pstn_fp=t\r\n&pstn_cn={{CardNumber}}\r\n&pstn_ex={{Expiry}}"
										},
										"url": {
											"raw": "https://www.paystation.co.nz/direct/paystation.dll",
											"protocol": "https",
											"host": [
												"www",
												"paystation",
												"co",
												"nz"
											],
											"path": [
												"direct",
												"paystation.dll"
											]
										}
									},
									"response": []
								},
								{
									"name": "token initiator + authorisation",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_am=100\r\n&pstn_2p=t\r\n&pstn_fp=t\r\n&pstn_cn={{CardNumber}}\r\n&pstn_ex={{Expiry}}\r\n&pstn_pa=t"
										},
										"url": {
											"raw": "https://www.paystation.co.nz/direct/paystation.dll",
											"protocol": "https",
											"host": [
												"www",
												"paystation",
												"co",
												"nz"
											],
											"path": [
												"direct",
												"paystation.dll"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "3 party",
							"item": [
								{
									"name": "token initiator",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_am=100\r\n&pstn_fp=t"
										},
										"url": {
											"raw": "https://www.paystation.co.nz/direct/paystation.dll",
											"protocol": "https",
											"host": [
												"www",
												"paystation",
												"co",
												"nz"
											],
											"path": [
												"direct",
												"paystation.dll"
											]
										}
									},
									"response": []
								},
								{
									"name": "token initiator + authorisation",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_am=100\r\n&pstn_fp=t\r\n&pstn_pa=t"
										},
										"url": {
											"raw": "https://www.paystation.co.nz/direct/paystation.dll",
											"protocol": "https",
											"host": [
												"www",
												"paystation",
												"co",
												"nz"
											],
											"path": [
												"direct",
												"paystation.dll"
											]
										}
									},
									"response": []
								}
							]
						}
					]
				},
				{
					"name": "Bill",
					"item": [
						{
							"name": "token bill",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_am=100\r\n&pstn_2p=t\r\n&pstn_fp=t\r\n&pstn_ft=token_name"
								},
								"url": {
									"raw": "https://www.paystation.co.nz/direct/paystation.dll",
									"protocol": "https",
									"host": [
										"www",
										"paystation",
										"co",
										"nz"
									],
									"path": [
										"direct",
										"paystation.dll"
									]
								}
							},
							"response": []
						},
						{
							"name": "token bill + authorisation",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_am=100\r\n&pstn_fp=t\r\n&pstn_2p=t\r\n&pstn_pa=t\r\n&pstn_ft=token_name"
								},
								"url": {
									"raw": "https://www.paystation.co.nz/direct/paystation.dll",
									"protocol": "https",
									"host": [
										"www",
										"paystation",
										"co",
										"nz"
									],
									"path": [
										"direct",
										"paystation.dll"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Update",
					"item": [
						{
							"name": "token update",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_2p=t\r\n&pstn_fp=t\r\n&pstn_fu=t\r\n&pstn_ft=token_name\r\n&pstn_cn={{CardNumber}}\r\n&pstn_ex={{Expiry}}"
								},
								"url": {
									"raw": "https://www.paystation.co.nz/direct/paystation.dll",
									"protocol": "https",
									"host": [
										"www",
										"paystation",
										"co",
										"nz"
									],
									"path": [
										"direct",
										"paystation.dll"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Delete",
					"item": [
						{
							"name": "token delete",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_ms={{$guid}}\r\n&pstn_2p=t\r\n&pstn_fp=t\r\n&pstn_fx=t\r\n&pstn_ft=token_name"
								},
								"url": {
									"raw": "https://www.paystation.co.nz/direct/paystation.dll",
									"protocol": "https",
									"host": [
										"www",
										"paystation",
										"co",
										"nz"
									],
									"path": [
										"direct",
										"paystation.dll"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "PayMe",
			"item": [
				{
					"name": "Create order",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "paystation",
									"value": "_empty",
									"type": "text"
								},
								{
									"key": "pstn_nr",
									"value": "t",
									"type": "text"
								},
								{
									"key": "pstn_pi",
									"value": "{{PaystationAccount}}",
									"type": "text"
								},
								{
									"key": "pstn_gi",
									"value": "{{PaystationGateway}}",
									"type": "text"
								},
								{
									"key": "pstn_ms",
									"value": "{{$guid}}",
									"type": "text"
								},
								{
									"key": "pstn_co",
									"value": "t",
									"type": "text"
								},
								{
									"key": "pstn_cj",
									"value": "{\n   \"reference\":\"PayMe reference\",\n   \"description\":\"A description for a PayMe example\",\n   \"single\":\"N\"\n}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				},
				{
					"name": "Token save",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_fp=t\r\n&pstn_co=t\r\n&pstn_fs=t"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				},
				{
					"name": "Token initiator",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_fp=t\r\n&pstn_co=t"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				},
				{
					"name": "Token intitiator with amount",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "paystation=_empty\r\n&pstn_nr=t\r\n&pstn_pi={{PaystationAccount}}\r\n&pstn_gi={{PaystationGateway}}\r\n&pstn_am=100\r\n&pstn_fp=t\r\n&pstn_co=t"
						},
						"url": {
							"raw": "https://www.paystation.co.nz/direct/paystation.dll",
							"protocol": "https",
							"host": [
								"www",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"direct",
								"paystation.dll"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Quick lookup",
			"item": [
				{
					"name": "Lookup by merchant session",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://payments.paystation.co.nz/lookup?pi={{PaystationAccount}}&ms=<merchant_session_goes_here>",
							"protocol": "https",
							"host": [
								"payments",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"lookup"
							],
							"query": [
								{
									"key": "pi",
									"value": "{{PaystationAccount}}"
								},
								{
									"key": "ms",
									"value": "<merchant_session_goes_here>"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Lookup by transaction id",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://payments.paystation.co.nz/lookup?pi={{PaystationAccount}}&ti=0000000000-01",
							"protocol": "https",
							"host": [
								"payments",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"lookup"
							],
							"query": [
								{
									"key": "pi",
									"value": "{{PaystationAccount}}"
								},
								{
									"key": "ti",
									"value": "0000000000-01"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "BIN lookup",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "pstn_pi",
									"value": "{{PaystationAccount}}",
									"type": "text"
								},
								{
									"key": "pstn_bi",
									"value": "512345",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "https://payments.paystation.co.nz/bin/",
							"protocol": "https",
							"host": [
								"payments",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"bin",
								""
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Transaction reporting",
			"item": [
				{
					"name": "Transaction reporting",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "pstn_pi",
									"value": "{{PaystationAccount}}",
									"type": "text"
								},
								{
									"key": "pstn_gi",
									"value": "{{PaystationGateway}}",
									"type": "text"
								},
								{
									"key": "pstn_cu",
									"value": "AUD",
									"type": "text",
									"disabled": true
								},
								{
									"key": "pstn_rf",
									"value": "json",
									"type": "text",
									"disabled": true
								},
								{
									"key": "currency_list",
									"value": "NZD,USD",
									"type": "text",
									"disabled": true
								},
								{
									"key": "merchant_session_partial_match",
									"value": "Y",
									"type": "text",
									"disabled": true
								},
								{
									"key": "merchant_session",
									"value": "abcd-defg",
									"type": "text",
									"disabled": true
								},
								{
									"key": "amount",
									"value": "1000",
									"type": "text",
									"disabled": true
								},
								{
									"key": "card_start",
									"value": "512345",
									"type": "text",
									"disabled": true
								},
								{
									"key": "card_end",
									"value": "123",
									"type": "text",
									"disabled": true
								},
								{
									"key": "transaction_mode",
									"value": "P",
									"type": "text",
									"disabled": true
								},
								{
									"key": "transaction_type",
									"value": "REFUND",
									"type": "text",
									"disabled": true
								},
								{
									"key": "refund_format",
									"value": "NEGATIVE",
									"type": "text",
									"disabled": true
								},
								{
									"key": "returned_result_code",
									"value": "FAILED",
									"type": "text",
									"disabled": true
								},
								{
									"key": "total_only",
									"value": "Y",
									"type": "text",
									"disabled": true
								},
								{
									"key": "short_tags",
									"value": "Y",
									"type": "text",
									"disabled": true
								},
								{
									"key": "transaction_id",
									"value": "0003674628-01",
									"type": "text",
									"disabled": true
								},
								{
									"key": "merchant_reference",
									"value": "1",
									"type": "text",
									"disabled": true
								},
								{
									"key": "from_date",
									"value": "2019-01-01",
									"type": "text"
								},
								{
									"key": "to_date",
									"value": "2019-01-01",
									"type": "text",
									"disabled": true
								},
								{
									"key": "from_time",
									"value": "12:00:00",
									"type": "text",
									"disabled": true
								},
								{
									"key": "to_time",
									"value": "12:00:00",
									"type": "text",
									"disabled": true
								},
								{
									"key": "settlement_date",
									"value": "Y",
									"type": "text",
									"disabled": true
								},
								{
									"key": "limit",
									"value": "1",
									"type": "text",
									"disabled": true
								},
								{
									"key": "start_record",
									"value": "10000",
									"type": "text",
									"disabled": true
								},
								{
									"key": "payme_order_id",
									"value": "1",
									"type": "text",
									"disabled": true
								},
								{
									"key": "limit_sort",
									"value": "ASC",
									"type": "text",
									"disabled": true
								},
								{
									"key": "amount_type",
									"value": "LESS",
									"type": "text",
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "https://payments.paystation.co.nz/reporting/",
							"protocol": "https",
							"host": [
								"payments",
								"paystation",
								"co",
								"nz"
							],
							"path": [
								"reporting",
								""
							]
						}
					},
					"response": []
				}
			]
		}
	]
}